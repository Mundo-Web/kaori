var j=Object.defineProperty;var g=(n,s,i)=>s in n?j(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i;var u=(n,s,i)=>(g(n,typeof s!="symbol"?s+"":s,i),i);import{j as e}from"./AboutHeader-DEdD30eg.js";import{r as m}from"./index-RYns6xqu.js";import{c as N}from"./ReactAppend-vpV7VTGG.js";import{B as C}from"./Base-BOeSTE30.js";import{C as y}from"./CreateReactScript-BERtc5uF.js";import{T as w,R as p,D as f}from"./ReactAppend-Cs1W0nFc.js";import{B}from"./BasicEditing-_5-btK4A.js";import{S as R}from"./sweetalert2.all-DJo0UVK6.js";import{B as M}from"./BasicEditing-RKEd4jLE.js";import"./index-CXU7o9CY.js";import"./tippy-react.esm-DYFqe69e.js";/* empty css              */import"./main-BjVPLcVK.js";import"./___vite-browser-external_commonjs-proxy-DbMF7jdq.js";import"./index.esm-Bla6j_hB.js";/* empty css               */import"./ArrayDetails2Object-Bh0nNl8c.js";import"./HtmlContent-Ca-OCC2e.js";class v extends B{constructor(){super(...arguments);u(this,"path","admin/messages")}}const D=({modalRef:n,title:s="Modal",isStatic:i=!1,size:a="md",children:o,bodyClass:c="",btnCancelText:l,btnSubmitText:t,hideFooter:r,hideButtonSubmit:h,onSubmit:b=d=>{d.preventDefault(),$(n.current).modal("hide")}})=>{const d=i?{"data-bs-backdrop":"static"}:{};return e.jsx("form",{className:"modal fade",ref:n,tabIndex:"-1","aria-hidden":"true",...d,onSubmit:b,autoComplete:"off",children:e.jsx("div",{className:`modal-dialog modal-dialog-centered modal-${a??"md"}`,children:e.jsxs("div",{className:"modal-content ",style:{boxShadow:"0 0 10px rgba(0,0,0,0.25)"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:s}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:`modal-body ${c??""}`,children:o}),!r&&e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-sm btn-danger pull-left",type:"button","data-bs-dismiss":"modal",children:l??"Cerrar"}),!h&&e.jsx("button",{className:"btn btn-sm btn-success pull-right",type:"submit",children:t??"Aceptar"})]})]})})})},x=new v,F=({details:n})=>{const s=m.useRef(),i=m.useRef(),[a,o]=m.useState(null),c=async t=>{const{isConfirmed:r}=await R.fire({title:"Eliminar mensaje",text:"¿Estas seguro de eliminar este mensaje?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"});!r||!await x.delete(t)||$(s.current).dxDataGrid("instance").refresh()},l=t=>{t.seen||(x.boolean({id:t,field:"seen",value:!0}),$(s.current).dxDataGrid("instance").refresh()),o(t),$(i.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(w,{gridRef:s,title:e.jsx(M,{correlative:"messages",details:n}),rest:x,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",cellTemplate:(t,{data:r})=>{p(t,e.jsx("span",{style:{width:"100%",fontWeight:r.seen?"lighter":"bold",cursor:"pointer"},onClick:()=>l(r),children:r.name}))}},{dataField:"email",caption:"Correo"},{dataField:"created_at",caption:"Fecha",dataType:"datetime",format:"yyyy-MM-dd HH:mm:ss",sortOrder:"desc"},{dataField:"status",caption:"Estado",dataType:"boolean",cellTemplate:(t,{data:r})=>{r.seen?p(t,e.jsx("span",{className:"badge bg-success rounded-pill",children:"Leído"})):p(t,e.jsx("span",{className:"badge bg-danger rounded-pill",children:"No leído"}))}},{caption:"Acciones",cellTemplate:(t,{data:r})=>{t.append(f({className:"btn btn-xs btn-soft-dark",title:"Ver mensaje",icon:"fa fa-eye",onClick:()=>l(r)})),t.append(f({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>c(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsxs(D,{modalRef:i,title:"Mensaje",hideFooter:!0,children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre"}),":",e.jsx("span",{className:"ms-1",children:a==null?void 0:a.name})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo"}),":",e.jsx("span",{className:"ms-1",children:(a==null?void 0:a.email)||e.jsx("i",{className:"text-muted",children:"- Sin correo -"})})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Asunto"}),":",e.jsx("span",{className:"ms-1",children:a==null?void 0:a.subject})]}),e.jsxs("p",{children:[e.jsx("b",{children:"Mensaje"}),":",e.jsx("span",{className:"ms-1",children:a==null?void 0:a.description})]})]})]})};y((n,s)=>{N(n).render(e.jsx(C,{...s,title:"Mensajes",children:e.jsx(F,{...s})}))});
